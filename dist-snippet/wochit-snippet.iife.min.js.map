{"version":3,"file":"wochit-snippet.iife.min.js","sources":["../lib/model/const.js","../lib/api/toolkit.js","../lib/model/CommonOptions.js","../lib/model/ShortcutOptions.js","../lib/api/dom.js","../lib/model/WochitEmbeddedApp.js","../lib/module.js","../lib/snippet.ts"],"sourcesContent":["export const LOGGER_PREFIX = '@wochit/embedded:';\nexport const CONTAINER_CLASS = 'wochit-embedded-container';\nexport const IFRAME_ID = 'wtInsideIframe';\nexport const IFRAME_CLASS = 'wochit-embedded-iframe';\nexport const WOCHIT_DOMAIN_MASK = '.wochit.com';\nexport const ENV_URL_SHORTCUT = {\n    test: 'https://shortcut-test.wochit.com/',\n    'test-local': 'https://localhost.wochit.com:8080/',\n    'test-docker': 'https://fb-self-serve-shortcut.wochit.com/',\n    stage: 'https://shortcut-stage.wochit.com/',\n    prod: 'https://shortcut.wochit.com/',\n    'prod-local': 'https://localhost.wochit.com:8080/',\n};\nexport var INCOMING_MESSAGE;\n(function (INCOMING_MESSAGE) {\n    INCOMING_MESSAGE[\"SHORTCUT_READY\"] = \"shortcutLoaded\";\n    INCOMING_MESSAGE[\"STUDIO_READY\"] = \"studioLoaded\";\n    INCOMING_MESSAGE[\"APPLICATION_EVENT\"] = \"APPLICATION_EVENT\";\n})(INCOMING_MESSAGE || (INCOMING_MESSAGE = {}));\nexport var OUTGOING_MESSAGE;\n(function (OUTGOING_MESSAGE) {\n    OUTGOING_MESSAGE[\"SHORTCUT_OPTIONS\"] = \"shortcutOptions\";\n    OUTGOING_MESSAGE[\"STUDIO_OPTIONS\"] = \"studioOptions\";\n})(OUTGOING_MESSAGE || (OUTGOING_MESSAGE = {}));\n","import { LOGGER_PREFIX } from '../model/const';\nexport function noop() {\n    // no operation\n}\nexport function hasValue(value) {\n    return value !== null && value !== undefined;\n}\nexport function hasHTMLElement(value) {\n    return value instanceof HTMLElement;\n}\nexport function hasBoolean(value) {\n    return value === true || value === false;\n}\nexport function hasString(value) {\n    return typeof value === 'string' && value.length > 0;\n}\nexport function hasNumber(value) {\n    return typeof value === 'number' && Number.isFinite(value);\n}\nexport function hasArray(value) {\n    return value instanceof Array && value.length > 0;\n}\nexport function hasObject(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport function logError(msg) {\n    console?.error(LOGGER_PREFIX, msg);\n}\nexport function uuid() {\n    return crypto?.randomUUID ? crypto.randomUUID() : Date.now().toString(36);\n}\nexport function normalizeSpace(str) {\n    return str.trim().replace(/\\s+/gm, ' ');\n}\n","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CommonOptions_environments;\nimport { hasBoolean, hasNumber, hasString } from '../api/toolkit';\nexport class CommonOptions {\n    constructor(options) {\n        _CommonOptions_environments.set(this, [\n            'test',\n            'prod',\n            'stage',\n            'test-local',\n            'prod-local',\n            'test-docker',\n        ]);\n        Object.defineProperty(this, \"channelId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ''\n        });\n        Object.defineProperty(this, \"organizationId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"isShownInModal\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"idpServiceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"ssoUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"env\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'prod'\n        });\n        for (const prop in options) {\n            if (Object.prototype.hasOwnProperty.call(options, prop)) {\n                this[prop] = options[prop];\n            }\n        }\n        if (!hasNumber(this.organizationId)) {\n            this.organizationId = null;\n        }\n        if (!hasBoolean(this.verbose)) {\n            this.verbose = false;\n        }\n        if (!(hasString(this.env) && __classPrivateFieldGet(this, _CommonOptions_environments, \"f\").indexOf(this.env) >= 0)) {\n            this.env = 'prod';\n        }\n        if (!hasBoolean(this.isShownInModal)) {\n            this.isShownInModal = true;\n        }\n        if (!hasString(this.idpServiceName)) {\n            this.idpServiceName = null;\n        }\n        if (!hasString(this.ssoUrl)) {\n            this.ssoUrl = null;\n        }\n    }\n}\n_CommonOptions_environments = new WeakMap();\n","import { hasArray, hasBoolean, hasHTMLElement, hasObject, hasString, noop, } from '../api/toolkit';\nexport class ShortcutOptions {\n    constructor(options) {\n        Object.defineProperty(this, \"containerEl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"userToken\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"linkedFields\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"videoContext\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"categoryNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"storyboardId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"videoId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"videoTitle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"showCreativeGallery\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"showUploadGallery\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"galleryAssets\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"destLanguage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"showSaveForLater\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"on\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: { ready: noop }\n        });\n        Object.defineProperty(this, \"kalturaProperties\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        for (const prop in options) {\n            if (Object.prototype.hasOwnProperty.call(options, prop)) {\n                this[prop] = options[prop];\n            }\n        }\n        if (!hasHTMLElement(this.containerEl)) {\n            this.containerEl = null;\n        }\n        if (!hasString(this.userToken)) {\n            this.userToken = null;\n        }\n        if (!hasObject(this.linkedFields)) {\n            this.linkedFields = null;\n        }\n        if (!hasString(this.videoContext)) {\n            this.videoContext = null;\n        }\n        if (!hasString(this.categoryNames)) {\n            this.categoryNames = null;\n        }\n        if (!hasString(this.storyboardId)) {\n            this.storyboardId = null;\n        }\n        if (!hasString(this.videoId)) {\n            this.videoId = null;\n        }\n        if (!hasString(this.videoTitle)) {\n            this.videoTitle = null;\n        }\n        if (!hasBoolean(this.showCreativeGallery)) {\n            this.showCreativeGallery = false;\n        }\n        if (!hasBoolean(this.showUploadGallery)) {\n            this.showUploadGallery = false;\n        }\n        if (!hasArray(this.galleryAssets)) {\n            this.galleryAssets = null;\n        }\n        if (!hasString(this.destLanguage)) {\n            this.destLanguage = null;\n        }\n        if (!hasBoolean(this.showSaveForLater)) {\n            this.showSaveForLater = false;\n        }\n        this.on = hasObject(this.on) ? this.on : { ready: noop };\n        if (typeof this.on?.ready !== 'function') {\n            this.on.ready = noop;\n        }\n    }\n}\n","import { CONTAINER_CLASS, IFRAME_CLASS, IFRAME_ID } from '../model/const';\nimport { normalizeSpace } from './toolkit';\nexport function createContainer$(uuid) {\n    const $el = document.createElement('DIV');\n    $el.dataset['uuid'] = uuid;\n    $el.classList.add(CONTAINER_CLASS);\n    return $el;\n}\nexport function createIframe$(uuid, src) {\n    const $el = document.createElement('IFRAME');\n    $el.dataset['uuid'] = uuid;\n    $el.id = IFRAME_ID;\n    $el.classList.add(IFRAME_CLASS);\n    $el.setAttribute('allow', 'fullscreen *; microphone *;camera *;display-capture *;');\n    $el.setAttribute('src', src);\n    return $el;\n}\nexport function createStyle$(uuid) {\n    const $el = document.createElement('STYLE');\n    $el.dataset.uuid = uuid;\n    $el.textContent = normalizeSpace(`\n    .${CONTAINER_CLASS}[data-uuid=\"${uuid}\"]:not(:empty) {\n      position: fixed;\n      height: 100%;\n      width: 100%;\n      top: 0;\n      left: 0;\n      padding: 5vh 5vw;\n      box-sizing: border-box;\n      background: rgba(0, 0, 0, 0.6);\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .${CONTAINER_CLASS}[data-uuid=\"${uuid}\"]:not(:empty) .${IFRAME_CLASS} {\n      width: 100%;\n      height: 100%;\n      border: none;\n    }\n  `);\n    return $el;\n}\n","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _WochitEmbeddedApp_instances, _WochitEmbeddedApp_uuid, _WochitEmbeddedApp_$iframe, _WochitEmbeddedApp_getContainer$, _WochitEmbeddedApp_getIframe$, _WochitEmbeddedApp_isIframeMounted, _WochitEmbeddedApp_unmountIframe, _WochitEmbeddedApp_mountIframe, _WochitEmbeddedApp_isRelevantMessage, _WochitEmbeddedApp_onMessage, _WochitEmbeddedApp_onShortcutReady, _WochitEmbeddedApp_onStudioReady, _WochitEmbeddedApp_onShortcutApplicationEvent;\nimport { hasObject, uuid } from '../api/toolkit';\nimport { createContainer$, createIframe$, createStyle$ } from '../api/dom';\nimport { CONTAINER_CLASS, IFRAME_CLASS, LOGGER_PREFIX, ENV_URL_SHORTCUT, WOCHIT_DOMAIN_MASK, INCOMING_MESSAGE, OUTGOING_MESSAGE, } from './const';\nlet common;\nlet shortcut;\nexport class WochitEmbeddedApp {\n    constructor() {\n        _WochitEmbeddedApp_instances.add(this);\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        _WochitEmbeddedApp_uuid.set(this, uuid());\n        _WochitEmbeddedApp_$iframe.set(this, null);\n        window.addEventListener('message', (e) => {\n            if (__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_isRelevantMessage).call(this, e)) {\n                __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onMessage).call(this, e);\n            }\n        });\n    }\n    log(...args) {\n        if (this.verbose) {\n            console?.log(LOGGER_PREFIX, ...args);\n        }\n    }\n    setContext(_common, _shortcut) {\n        common = _common;\n        shortcut = _shortcut;\n    }\n    openShortcut() {\n        if (__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_isIframeMounted).call(this)) {\n            __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountIframe).call(this);\n        }\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_mountIframe).call(this);\n    }\n}\n_WochitEmbeddedApp_uuid = new WeakMap(), _WochitEmbeddedApp_$iframe = new WeakMap(), _WochitEmbeddedApp_instances = new WeakSet(), _WochitEmbeddedApp_getContainer$ = function _WochitEmbeddedApp_getContainer$() {\n    return document.querySelector(`.${CONTAINER_CLASS}[data-uuid=\"${__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\")}\"]`);\n}, _WochitEmbeddedApp_getIframe$ = function _WochitEmbeddedApp_getIframe$() {\n    return document.querySelector(`.${IFRAME_CLASS}[data-uuid=\"${__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\")}\"]`);\n}, _WochitEmbeddedApp_isIframeMounted = function _WochitEmbeddedApp_isIframeMounted() {\n    return !!__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_getIframe$).call(this);\n}, _WochitEmbeddedApp_unmountIframe = function _WochitEmbeddedApp_unmountIframe() {\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_getContainer$).call(this)?.replaceChildren();\n    __classPrivateFieldSet(this, _WochitEmbeddedApp_$iframe, null, \"f\");\n}, _WochitEmbeddedApp_mountIframe = function _WochitEmbeddedApp_mountIframe() {\n    let $container = shortcut.containerEl;\n    if ($container) {\n        $container.dataset.uuid = __classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\");\n        $container.classList.add(CONTAINER_CLASS);\n    }\n    else {\n        $container = __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_getContainer$).call(this);\n        if (!$container) {\n            $container = createContainer$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"));\n            document.body.appendChild($container);\n        }\n    }\n    // ??? if (common.isShownInModal) ???\n    const $style = createStyle$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"));\n    $container.appendChild($style);\n    const src = `${ENV_URL_SHORTCUT[common.env]}?t=${Date.now()}`;\n    __classPrivateFieldSet(this, _WochitEmbeddedApp_$iframe, createIframe$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"), src), \"f\");\n    $container.appendChild(__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\"));\n}, _WochitEmbeddedApp_isRelevantMessage = function _WochitEmbeddedApp_isRelevantMessage(e) {\n    const originUrl = new URL(e.origin);\n    return (originUrl.hostname.endsWith(WOCHIT_DOMAIN_MASK) &&\n        hasObject(common) &&\n        hasObject(shortcut) &&\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\") !== null);\n}, _WochitEmbeddedApp_onMessage = function _WochitEmbeddedApp_onMessage(e) {\n    this.log('#onMessage', e.data);\n    if (e.data === INCOMING_MESSAGE.SHORTCUT_READY) {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onShortcutReady).call(this);\n    }\n    else if (e.data === INCOMING_MESSAGE.STUDIO_READY) {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onStudioReady).call(this);\n    }\n    else if (typeof e.data === 'object') {\n        if (e.data?.type === INCOMING_MESSAGE.APPLICATION_EVENT) {\n            __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onShortcutApplicationEvent).call(this, e);\n        }\n    }\n}, _WochitEmbeddedApp_onShortcutReady = function _WochitEmbeddedApp_onShortcutReady() {\n    shortcut.on.ready(__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\")?.contentWindow);\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\")?.contentWindow?.postMessage({\n        cmd: OUTGOING_MESSAGE.SHORTCUT_OPTIONS,\n        version: __APP_VERSION__,\n        JWT: shortcut.userToken,\n        ...JSON.parse(JSON.stringify({ ...common, ...shortcut })),\n    }, ENV_URL_SHORTCUT[common.env]);\n}, _WochitEmbeddedApp_onStudioReady = function _WochitEmbeddedApp_onStudioReady() {\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\")?.contentWindow?.postMessage({\n        cmd: OUTGOING_MESSAGE.STUDIO_OPTIONS,\n        JWT: shortcut.userToken,\n        kalturaProperties: shortcut.kalturaProperties,\n        isReEditing: !!shortcut.videoId,\n    }, '*');\n}, _WochitEmbeddedApp_onShortcutApplicationEvent = function _WochitEmbeddedApp_onShortcutApplicationEvent(e) {\n    const eventName = e.data.event.toLowerCase();\n    this.log('#onShortcutApplicationEvent', eventName, e.data.payload);\n    if (typeof shortcut.on[eventName] === 'function') {\n        shortcut?.on[eventName]?.(e.data.payload);\n    }\n    if (eventName === 'abort') {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountIframe).call(this);\n    }\n};\n","import { CommonOptions } from './model/CommonOptions';\nimport { ShortcutOptions } from './model/ShortcutOptions';\nimport { WochitEmbeddedApp } from './model/WochitEmbeddedApp';\nimport { hasObject, hasString, logError } from './api/toolkit';\nlet common;\nlet shortcut;\nconst app = new WochitEmbeddedApp();\nexport function config(options) {\n    if (!hasObject(options)) {\n        logError('calling config() without options');\n        return;\n    }\n    else if (!hasString(options.channelId)) {\n        logError('calling config() without channelId');\n        return;\n    }\n    common = new CommonOptions(options);\n    app.verbose = common.verbose;\n    app.log('config', common);\n}\nexport function openShortcut(options) {\n    if (!common) {\n        logError('calling openShortcut() before config()');\n        return;\n    }\n    shortcut = new ShortcutOptions(hasObject(options) ? options : {});\n    app.log('openShortcut', shortcut);\n    app.setContext(common, shortcut);\n    app.openShortcut();\n}\nexport default {\n    config,\n    openShortcut,\n};\n","import wt from './module';\n\ndeclare global {\n  interface Window {\n    wt: any;\n  }\n}\n\nfunction wochitSnippet() {\n  wt.config({ channelId: '1' });\n  wt.openShortcut({});\n\n  console.log('wochit-snippet', __APP_VERSION__, window.wt);\n}\n\nwochitSnippet();\n"],"names":["__classPrivateFieldGet","this","common","shortcut"],"mappings":"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"}