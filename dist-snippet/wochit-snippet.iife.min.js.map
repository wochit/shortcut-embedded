{"version":3,"file":"wochit-snippet.iife.min.js","sources":["../lib/model/const.js","../lib/api/toolkit.js","../lib/model/CommonOptions.js","../lib/model/ApplicationOptions.js","../lib/api/dom.js","../lib/model/WochitEmbeddedApp.js","../lib/module.js","../lib/snippet.ts"],"sourcesContent":["import { noop } from '../api/toolkit';\nexport const LOGGER_PREFIX = '@wochit/embedded:';\nexport const CONTAINER_CLASS = 'wochit-embedded-container';\nexport const IFRAME_CLASS = 'wochit-embedded-iframe';\nexport const BODY_WHEN_MOUNTED_CLASS = 'wochit-embedded-mounted';\nexport const SPINNER_CLASS = 'wochit-embedded-spinner';\nexport const WOCHIT_DOMAIN_MASK = '.wochit.com';\nexport var INCOMING_MESSAGE;\n(function (INCOMING_MESSAGE) {\n    INCOMING_MESSAGE[\"SHORTCUT_LOADED\"] = \"shortcutLoaded\";\n    INCOMING_MESSAGE[\"SHORTCUT_READY\"] = \"shortcutReady\";\n    INCOMING_MESSAGE[\"STUDIO_LOADED\"] = \"studioLoaded\";\n    INCOMING_MESSAGE[\"APPLICATION_EVENT\"] = \"APPLICATION_EVENT\";\n})(INCOMING_MESSAGE || (INCOMING_MESSAGE = {}));\nexport var OUTGOING_MESSAGE;\n(function (OUTGOING_MESSAGE) {\n    OUTGOING_MESSAGE[\"SHORTCUT_OPTIONS\"] = \"shortcutOptions\";\n    OUTGOING_MESSAGE[\"STUDIO_OPTIONS\"] = \"studioOptions\";\n})(OUTGOING_MESSAGE || (OUTGOING_MESSAGE = {}));\nexport const DEFAULT = {\n    SKIP_LOGIN: false,\n    VERBOSE: false,\n    ENV_URL: 'https://shortcut.wochit.com',\n    CALLBACK_LOADED: noop,\n};\n","import { LOGGER_PREFIX } from '../model/const';\nexport function noop() {\n    // no operation\n}\nexport function hasValue(value) {\n    return value !== null && value !== undefined;\n}\nexport function hasHTMLElement(value) {\n    return value instanceof HTMLElement;\n}\nexport function hasBoolean(value) {\n    return value === true || value === false;\n}\nexport function hasString(value) {\n    return typeof value === 'string' && value.length > 0;\n}\nexport function hasNumber(value) {\n    return typeof value === 'number' && Number.isFinite(value);\n}\nexport function hasArray(value) {\n    return value instanceof Array && value.length > 0;\n}\nexport function hasObject(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport function logError(msg) {\n    console?.error(LOGGER_PREFIX, msg);\n}\nexport function uuid() {\n    return crypto?.randomUUID ? crypto.randomUUID() : Date.now().toString(36);\n}\nexport function normalizeSpace(str) {\n    return str.trim().replace(/\\s+/gm, ' ');\n}\n","import { hasBoolean, hasString } from '../api/toolkit';\nimport { DEFAULT } from './const';\nexport class CommonOptions {\n    constructor(options) {\n        Object.defineProperty(this, \"channelId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ''\n        });\n        Object.defineProperty(this, \"userToken\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"skipLogin\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: DEFAULT.SKIP_LOGIN\n        });\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: DEFAULT.VERBOSE\n        });\n        for (const prop in options) {\n            if (Object.prototype.hasOwnProperty.call(options, prop)) {\n                this[prop] = options[prop];\n            }\n        }\n        if (!hasBoolean(this.skipLogin)) {\n            this.skipLogin = DEFAULT.SKIP_LOGIN;\n        }\n        if (!hasBoolean(this.verbose)) {\n            this.verbose = false;\n        }\n        if (!hasString(this.envUrl)) {\n            this.envUrl = DEFAULT.ENV_URL;\n        }\n    }\n}\n","import { hasBoolean, hasHTMLElement, hasObject, hasString, } from '../api/toolkit';\nimport { DEFAULT } from './const';\nexport class ApplicationOptions {\n    constructor(options) {\n        Object.defineProperty(this, \"envUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: DEFAULT.ENV_URL\n        });\n        Object.defineProperty(this, \"containerEl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"isShownInModal\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: undefined\n        });\n        Object.defineProperty(this, \"videoId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"on\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: { loaded: DEFAULT.CALLBACK_LOADED }\n        });\n        for (const prop in options) {\n            if (Object.prototype.hasOwnProperty.call(options, prop)) {\n                this[prop] = options[prop];\n            }\n        }\n        if (!hasHTMLElement(this.containerEl)) {\n            this.containerEl = null;\n        }\n        /**\n         * if `isShownInModal` was not specified - it's value derived from existence of `containerEl`\n         * in such a way that if `containerEl` is not an element then we assume iframe is opened\n         * as a modal, and if `containerEl` is defined then iframe is embedded inline\n         */\n        if (!hasBoolean(this.isShownInModal)) {\n            this.isShownInModal = !this.containerEl;\n        }\n        if (!hasString(this.videoId)) {\n            this.videoId = null;\n        }\n        this.on = hasObject(this.on)\n            ? this.on\n            : { loaded: DEFAULT.CALLBACK_LOADED };\n        if (typeof this.on?.loaded !== 'function') {\n            this.on.loaded = DEFAULT.CALLBACK_LOADED;\n        }\n    }\n}\n","import { BODY_WHEN_MOUNTED_CLASS, CONTAINER_CLASS, IFRAME_CLASS, SPINNER_CLASS, } from '../model/const';\nimport { normalizeSpace } from './toolkit';\nexport function createContainer$(uuid) {\n    const $el = document.createElement('DIV');\n    $el.dataset['uuid'] = uuid;\n    $el.classList.add(CONTAINER_CLASS);\n    return $el;\n}\nexport function createSpinner$() {\n    const $el = document.createElement('DIV');\n    $el.classList.add(SPINNER_CLASS);\n    return $el;\n}\nexport function createIframe$(uuid, src) {\n    const $el = document.createElement('IFRAME');\n    $el.dataset['uuid'] = uuid;\n    $el.classList.add(IFRAME_CLASS);\n    $el.setAttribute('allow', 'fullscreen *; microphone *;camera *;display-capture *;');\n    $el.setAttribute('src', src);\n    return $el;\n}\nexport function createStyle$(uuid) {\n    const $el = document.createElement('STYLE');\n    $el.dataset.uuid = uuid;\n    // language=CSS\n    $el.textContent = normalizeSpace(`\n    .${BODY_WHEN_MOUNTED_CLASS} {\n      overscroll-behavior-x: none;\n      overflow: hidden;\n    }\n    .${BODY_WHEN_MOUNTED_CLASS} .${CONTAINER_CLASS} {\n      box-sizing: border-box;\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: rgba(0, 0, 0, 0.45);\n    }\n    .${BODY_WHEN_MOUNTED_CLASS} .${CONTAINER_CLASS} .${SPINNER_CLASS} {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 80px;\n      height: 50px;\n      margin-left: -40px;\n      margin-top: -25px;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='38' height='38' viewBox='0 0 38 38' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient x1='8.042%25' y1='0%25' x2='65.682%25' y2='23.865%25' id='a'%3E%3Cstop stop-color='%2306A9F4' stop-opacity='0' offset='0%25'/%3E%3Cstop stop-color='%2306A9F4' stop-opacity='.331' offset='63.146%25'/%3E%3Cstop stop-color='%2306A9F4' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(1 1)'%3E%3Cpath d='M36 18c0-9.94-8.06-18-18-18' id='Oval-2' stroke='url(%23a)' stroke-width='2'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/path%3E%3Ccircle fill='%2306A9F4' cx='36' cy='18' r='1'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/circle%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n      background-repeat: no-repeat;\n      background-size: 100% 100%;\n    }\n    .${BODY_WHEN_MOUNTED_CLASS} .${CONTAINER_CLASS} .${IFRAME_CLASS} {\n      border: none;\n      width: 100%;\n      height: 100%;\n    }\n    @media (min-width: 1440px) {\n      .${BODY_WHEN_MOUNTED_CLASS} .${CONTAINER_CLASS} .${IFRAME_CLASS} {\n        max-width: 90%;\n        max-height: 90%;\n        min-width: 1280px;\n        border-radius: 5px;\n        overflow: hidden;\n        filter: drop-shadow(-10px 4px 40px rgba(0, 0, 0, 0.25));\n      }\n    }\n    @media (max-width: 1440px) {\n      .${BODY_WHEN_MOUNTED_CLASS} .${CONTAINER_CLASS} .${IFRAME_CLASS} {\n        max-width: 100%;\n        max-height: 100%;\n      }\n    }\n  `);\n    return $el;\n}\n","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _WochitEmbeddedApp_instances, _WochitEmbeddedApp_uuid, _WochitEmbeddedApp_$iframe, _WochitEmbeddedApp_$spinner, _WochitEmbeddedApp_getContainer$, _WochitEmbeddedApp_getIframe$, _WochitEmbeddedApp_isIframeMounted, _WochitEmbeddedApp_unmountIframe, _WochitEmbeddedApp_mountIframe, _WochitEmbeddedApp_unmountSpinner, _WochitEmbeddedApp_isRelevantMessage, _WochitEmbeddedApp_onMessage, _WochitEmbeddedApp_onShortcutLoaded, _WochitEmbeddedApp_onStudioLoaded, _WochitEmbeddedApp_onShortcutReady, _WochitEmbeddedApp_onShortcutApplicationEvent;\nimport { hasObject, uuid } from '../api/toolkit';\nimport { createContainer$, createIframe$, createStyle$, createSpinner$, } from '../api/dom';\nimport { CONTAINER_CLASS, IFRAME_CLASS, LOGGER_PREFIX, WOCHIT_DOMAIN_MASK, INCOMING_MESSAGE, OUTGOING_MESSAGE, BODY_WHEN_MOUNTED_CLASS, } from './const';\nlet common;\nlet shortcut;\nexport class WochitEmbeddedApp {\n    constructor() {\n        _WochitEmbeddedApp_instances.add(this);\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        _WochitEmbeddedApp_uuid.set(this, uuid());\n        _WochitEmbeddedApp_$iframe.set(this, null);\n        _WochitEmbeddedApp_$spinner.set(this, null);\n        window.addEventListener('message', (e) => {\n            if (__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_isRelevantMessage).call(this, e)) {\n                __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onMessage).call(this, e);\n            }\n        });\n    }\n    log(...args) {\n        if (this.verbose) {\n            console?.log(LOGGER_PREFIX, ...args);\n        }\n    }\n    setContext(_common, _shortcut) {\n        common = _common;\n        shortcut = _shortcut;\n    }\n    mount() {\n        if (__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_isIframeMounted).call(this)) {\n            __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountIframe).call(this);\n        }\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_mountIframe).call(this);\n    }\n}\n_WochitEmbeddedApp_uuid = new WeakMap(), _WochitEmbeddedApp_$iframe = new WeakMap(), _WochitEmbeddedApp_$spinner = new WeakMap(), _WochitEmbeddedApp_instances = new WeakSet(), _WochitEmbeddedApp_getContainer$ = function _WochitEmbeddedApp_getContainer$() {\n    return document.querySelector(`.${CONTAINER_CLASS}[data-uuid=\"${__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\")}\"]`);\n}, _WochitEmbeddedApp_getIframe$ = function _WochitEmbeddedApp_getIframe$() {\n    return document.querySelector(`.${IFRAME_CLASS}[data-uuid=\"${__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\")}\"]`);\n}, _WochitEmbeddedApp_isIframeMounted = function _WochitEmbeddedApp_isIframeMounted() {\n    return !!__classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_getIframe$).call(this);\n}, _WochitEmbeddedApp_unmountIframe = function _WochitEmbeddedApp_unmountIframe() {\n    if (shortcut.containerEl) {\n        // we won't remove user owned element - only it's content\n        shortcut.containerEl.replaceChildren();\n    }\n    else {\n        // otherwise we know we created it and can safely remove it\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_getContainer$).call(this)?.remove();\n    }\n    __classPrivateFieldSet(this, _WochitEmbeddedApp_$iframe, null, \"f\");\n    document.body.classList.remove(BODY_WHEN_MOUNTED_CLASS);\n}, _WochitEmbeddedApp_mountIframe = function _WochitEmbeddedApp_mountIframe() {\n    let $container = shortcut.containerEl;\n    const $df = document.createDocumentFragment();\n    if ($container) {\n        $container.dataset.uuid = __classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\");\n        $container.classList.add(CONTAINER_CLASS);\n    }\n    else {\n        $container = createContainer$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"));\n    }\n    if (!shortcut.containerEl) {\n        const $style = createStyle$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"));\n        $df.appendChild($style);\n    }\n    __classPrivateFieldSet(this, _WochitEmbeddedApp_$spinner, createSpinner$(), \"f\");\n    $df.appendChild(__classPrivateFieldGet(this, _WochitEmbeddedApp_$spinner, \"f\"));\n    const src = `${shortcut.envUrl}?t=${Date.now().toString(36)}`;\n    __classPrivateFieldSet(this, _WochitEmbeddedApp_$iframe, createIframe$(__classPrivateFieldGet(this, _WochitEmbeddedApp_uuid, \"f\"), src), \"f\");\n    $df.appendChild(__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\"));\n    $container.appendChild($df);\n    if (!shortcut.containerEl) {\n        document.body.appendChild($container);\n    }\n    document.body.classList.add(BODY_WHEN_MOUNTED_CLASS);\n}, _WochitEmbeddedApp_unmountSpinner = function _WochitEmbeddedApp_unmountSpinner() {\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_$spinner, \"f\")?.remove();\n}, _WochitEmbeddedApp_isRelevantMessage = function _WochitEmbeddedApp_isRelevantMessage(e) {\n    const originUrl = new URL(e.origin);\n    return (originUrl.hostname.endsWith(WOCHIT_DOMAIN_MASK) &&\n        hasObject(common) &&\n        hasObject(shortcut) &&\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\") !== null);\n}, _WochitEmbeddedApp_onMessage = function _WochitEmbeddedApp_onMessage(e) {\n    this.log('#onMessage', e.data);\n    if (e.data === INCOMING_MESSAGE.SHORTCUT_LOADED) {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onShortcutLoaded).call(this);\n    }\n    else if (e.data === INCOMING_MESSAGE.SHORTCUT_READY) {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onShortcutReady).call(this);\n    }\n    else if (e.data === INCOMING_MESSAGE.STUDIO_LOADED) {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onStudioLoaded).call(this);\n    }\n    else if (e.data && typeof e.data === 'object') {\n        if (e.data.type === INCOMING_MESSAGE.APPLICATION_EVENT &&\n            typeof e.data.type === 'string') {\n            __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_onShortcutApplicationEvent).call(this, e);\n        }\n    }\n}, _WochitEmbeddedApp_onShortcutLoaded = function _WochitEmbeddedApp_onShortcutLoaded() {\n    if (!__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\") || !__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\").contentWindow) {\n        return;\n    }\n    shortcut.on.loaded(__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\"));\n    const payload = JSON.parse(JSON.stringify({ ...common, ...shortcut }, (k, v) => {\n        return [\n            'on',\n            'containerEl',\n            'envUrl',\n            'verbose',\n            'skipLogin',\n            'userToken',\n        ].includes(k)\n            ? undefined\n            : v;\n    }));\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\").contentWindow.postMessage({\n        cmd: OUTGOING_MESSAGE.SHORTCUT_OPTIONS,\n        version: __APP_VERSION__,\n        JWT: common.userToken,\n        ...payload,\n    }, shortcut.envUrl);\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountSpinner).call(this);\n}, _WochitEmbeddedApp_onStudioLoaded = function _WochitEmbeddedApp_onStudioLoaded() {\n    if (!__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\") || !__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\").contentWindow) {\n        return;\n    }\n    shortcut.on.loaded(__classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\"));\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_$iframe, \"f\").contentWindow.postMessage({\n        cmd: OUTGOING_MESSAGE.STUDIO_OPTIONS,\n        version: __APP_VERSION__,\n        JWT: common.userToken,\n        isReEditing: !!shortcut?.videoId,\n        ...JSON.parse(JSON.stringify({ ...common, ...shortcut })),\n    }, '*');\n    __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountSpinner).call(this);\n}, _WochitEmbeddedApp_onShortcutReady = function _WochitEmbeddedApp_onShortcutReady() {\n    if (typeof shortcut.on.ready === 'function') {\n        shortcut.on.ready();\n    }\n}, _WochitEmbeddedApp_onShortcutApplicationEvent = function _WochitEmbeddedApp_onShortcutApplicationEvent(e) {\n    const eventName = e.data.event.toLowerCase();\n    this.log('#onShortcutApplicationEvent', eventName, e.data.payload);\n    const callback = shortcut.on[eventName];\n    if (typeof callback === 'function') {\n        callback(e.data.payload);\n    }\n    if (eventName === 'abort') {\n        __classPrivateFieldGet(this, _WochitEmbeddedApp_instances, \"m\", _WochitEmbeddedApp_unmountIframe).call(this);\n    }\n};\n","import { CommonOptions } from './model/CommonOptions';\nimport { ApplicationOptions } from './model/ApplicationOptions';\nimport { WochitEmbeddedApp } from './model/WochitEmbeddedApp';\nimport { hasObject, hasString, logError } from './api/toolkit';\nlet common;\nlet shortcut;\nconst app = new WochitEmbeddedApp();\nexport function config(options) {\n    if (!hasObject(options)) {\n        logError('calling config() without options');\n        return;\n    }\n    else if (!hasString(options.channelId)) {\n        logError('calling config() without channelId');\n        return;\n    }\n    else if (!hasString(options.userToken) && options.skipLogin !== true) {\n        logError('calling config() without userToken');\n        return;\n    }\n    common = new CommonOptions(options);\n    app.verbose = common.verbose;\n    app.log('config', common);\n}\nexport function openVideoCreator(options) {\n    if (!common) {\n        logError('calling openVideoCreator() before config()');\n        return;\n    }\n    shortcut = new ApplicationOptions(hasObject(options) ? options : {});\n    try {\n        new URL(shortcut.envUrl);\n    }\n    catch (xcp) {\n        logError(`calling openVideoCreator() with invalid envUrl: \"${options?.envUrl}\"`);\n        return;\n    }\n    app.log('openVideoCreator', shortcut);\n    app.setContext(common, shortcut);\n    app.mount();\n}\nexport default {\n    config,\n    openVideoCreator,\n};\n","import wt from './module';\n\ndeclare global {\n  interface Window {\n    wt: any;\n  }\n}\n\nfunction wochitSnippet() {\n  wt.config({ channelId: '1' });\n  wt.openVideoCreator({});\n\n  console.log('wochit-snippet', __APP_VERSION__, window.wt);\n}\n\nwochitSnippet();\n"],"names":["this","common","shortcut"],"mappings":"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"}