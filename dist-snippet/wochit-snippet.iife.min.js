var re=Object.defineProperty;var F=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var H=(l,r,d)=>r in l?re(l,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[r]=d,m=(l,r)=>{for(var d in r||(r={}))ae.call(r,d)&&H(l,d,r[d]);if(F)for(var d of F(r))de.call(r,d)&&H(l,d,r[d]);return l};(function(){"use strict";const l="@wochit/embedded:",r="wochit-embedded-container",d="wochit-embedded-iframe",u="wochit-embedded-mounted",W="wochit-embedded-spinner",B=".wochit.com";var b;(function(e){e.SHORTCUT_LOADED="shortcutLoaded",e.SHORTCUT_READY="shortcutReady",e.STUDIO_LOADED="studioLoaded",e.APPLICATION_EVENT="APPLICATION_EVENT"})(b||(b={}));var O;(function(e){e.SHORTCUT_OPTIONS="shortcutOptions",e.STUDIO_OPTIONS="studioOptions"})(O||(O={}));const h={SKIP_LOGIN:!1,VERBOSE:!1,ENV_URL:"https://shortcut.wochit.com",CALLBACK_LOADED:K};function K(){}function J(e){return e instanceof HTMLElement}function S(e){return e===!0||e===!1}function y(e){return typeof e=="string"&&e.length>0}function E(e){return typeof e=="object"&&e!==null}function _(e){console==null||console.error(l,e)}function G(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)}function Y(e){return e.trim().replace(/\s+/gm," ")}class z{constructor(t){Object.defineProperty(this,"channelId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"userToken",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"skipLogin",{enumerable:!0,configurable:!0,writable:!0,value:h.SKIP_LOGIN}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:h.VERBOSE});for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(this[i]=t[i]);S(this.skipLogin)||(this.skipLogin=h.SKIP_LOGIN),S(this.verbose)||(this.verbose=!1),y(this.envUrl)||(this.envUrl=h.ENV_URL)}}class q{constructor(t){var i;Object.defineProperty(this,"envUrl",{enumerable:!0,configurable:!0,writable:!0,value:h.ENV_URL}),Object.defineProperty(this,"containerEl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isShownInModal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"videoId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"on",{enumerable:!0,configurable:!0,writable:!0,value:{loaded:h.CALLBACK_LOADED}});for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(this[a]=t[a]);J(this.containerEl)||(this.containerEl=null),S(this.isShownInModal)||(this.isShownInModal=!this.containerEl),y(this.videoId)||(this.videoId=null),this.on=E(this.on)?this.on:{loaded:h.CALLBACK_LOADED},typeof((i=this.on)==null?void 0:i.loaded)!="function"&&(this.on.loaded=h.CALLBACK_LOADED)}}function X(e){const t=document.createElement("DIV");return t.dataset.uuid=e,t.classList.add(r),t}function Q(){const e=document.createElement("DIV");return e.classList.add(W),e}function Z(e,t){const i=document.createElement("IFRAME");return i.dataset.uuid=e,i.classList.add(d),i.setAttribute("allow","fullscreen *; microphone *;camera *;display-capture *;"),i.setAttribute("src",t),i}function ee(e){const t=document.createElement("STYLE");return t.dataset.uuid=e,t.textContent=Y(`
    .${u} {
      overscroll-behavior-x: none;
      overflow: hidden;
    }
    .${u} .${r} {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.6);
    }
    .${u} .${r} .${W} {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 50px;
      margin-left: -40px;
      margin-top: -25px;
      background-image: url("data:image/svg+xml,%3Csvg width='38' height='38' viewBox='0 0 38 38' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient x1='8.042%25' y1='0%25' x2='65.682%25' y2='23.865%25' id='a'%3E%3Cstop stop-color='%2306A9F4' stop-opacity='0' offset='0%25'/%3E%3Cstop stop-color='%2306A9F4' stop-opacity='.331' offset='63.146%25'/%3E%3Cstop stop-color='%2306A9F4' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(1 1)'%3E%3Cpath d='M36 18c0-9.94-8.06-18-18-18' id='Oval-2' stroke='url(%23a)' stroke-width='2'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/path%3E%3Ccircle fill='%2306A9F4' cx='36' cy='18' r='1'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/circle%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-size: 100% 100%;
    }
    .${u} .${r} .${d} {
      border: none;
      width: 100%;
      height: 100%;
    }
    @media (min-width: 1440px) {
      .${u} .${r} .${d} {
        max-width: 90%;
        max-height: 90%;
        min-width: 1280px;
      }
    }
    @media (max-width: 1440px) {
      .${u} .${r} .${d} {
        max-width: 100%;
        max-height: 100%;
      }
    }
  `),t}var n=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(e):a?a.value:t.get(e)},L=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,i,a,f){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!f:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?f.call(e,i):f?f.value=i:t.set(e,i),i},s,p,c,g,$,P,D,T,U,I,x,R,N,M,j,V;let v,o;class te{constructor(){s.add(this),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),p.set(this,G()),c.set(this,null),g.set(this,null),window.addEventListener("message",t=>{n(this,s,"m",x).call(this,t)&&n(this,s,"m",R).call(this,t)})}log(...t){this.verbose&&(console==null||console.log(l,...t))}setContext(t,i){v=t,o=i}openVideoEditor(){n(this,s,"m",D).call(this)&&n(this,s,"m",T).call(this),n(this,s,"m",U).call(this)}}p=new WeakMap,c=new WeakMap,g=new WeakMap,s=new WeakSet,$=function(){return document.querySelector(`.${r}[data-uuid="${n(this,p,"f")}"]`)},P=function(){return document.querySelector(`.${d}[data-uuid="${n(this,p,"f")}"]`)},D=function(){return!!n(this,s,"m",P).call(this)},T=function(){var t;o.containerEl?o.containerEl.replaceChildren():(t=n(this,s,"m",$).call(this))==null||t.remove(),L(this,c,null,"f"),document.body.classList.remove(u)},U=function(){let t=o.containerEl;const i=document.createDocumentFragment();if(t?(t.dataset.uuid=n(this,p,"f"),t.classList.add(r)):t=X(n(this,p,"f")),!o.containerEl){const f=ee(n(this,p,"f"));i.appendChild(f)}L(this,g,Q(),"f"),i.appendChild(n(this,g,"f"));const a=`${o.envUrl}?t=${Date.now().toString(36)}`;L(this,c,Z(n(this,p,"f"),a),"f"),i.appendChild(n(this,c,"f")),t.appendChild(i),o.containerEl||document.body.appendChild(t),document.body.classList.add(u)},I=function(){var t;(t=n(this,g,"f"))==null||t.remove()},x=function(t){return new URL(t.origin).hostname.endsWith(B)&&E(v)&&E(o)&&n(this,c,"f")!==null},R=function(t){this.log("#onMessage",t.data),t.data===b.SHORTCUT_LOADED?n(this,s,"m",N).call(this):t.data===b.SHORTCUT_READY?n(this,s,"m",j).call(this):t.data===b.STUDIO_LOADED?n(this,s,"m",M).call(this):t.data&&typeof t.data=="object"&&t.data.type===b.APPLICATION_EVENT&&typeof t.data.type=="string"&&n(this,s,"m",V).call(this,t)},N=function(){!n(this,c,"f")||!n(this,c,"f").contentWindow||(o.on.loaded(n(this,c,"f")),n(this,c,"f").contentWindow.postMessage(m({cmd:O.SHORTCUT_OPTIONS,version:"0.0.0",JWT:o.userToken},JSON.parse(JSON.stringify(m(m({},v),o)))),o.envUrl),n(this,s,"m",I).call(this))},M=function(){!n(this,c,"f")||!n(this,c,"f").contentWindow||(o.on.loaded(n(this,c,"f")),n(this,c,"f").contentWindow.postMessage(m({cmd:O.STUDIO_OPTIONS,version:"0.0.0",JWT:o.userToken,isReEditing:!!(o!=null&&o.videoId)},JSON.parse(JSON.stringify(m(m({},v),o)))),"*"),n(this,s,"m",I).call(this))},j=function(){typeof o.on.ready=="function"&&o.on.ready()},V=function(t){const i=t.data.event.toLowerCase();this.log("#onShortcutApplicationEvent",i,t.data.payload);const a=o.on[i];typeof a=="function"&&a(t.data.payload),i==="abort"&&n(this,s,"m",T).call(this)};let w,C;const A=new te;function ie(e){if(E(e))if(y(e.channelId)){if(!y(e.userToken)&&e.skipLogin!==!0){_("calling config() without userToken");return}}else{_("calling config() without channelId");return}else{_("calling config() without options");return}w=new z(e),A.verbose=w.verbose,A.log("config",w)}function ne(e){if(!w){_("calling openVideoEditor() before config()");return}C=new q(E(e)?e:{});try{new URL(C.envUrl)}catch{_(`calling openVideoEditor() with invalid envUrl: "${e==null?void 0:e.envUrl}"`);return}A.log("openVideoEditor",C),A.setContext(w,C),A.openVideoEditor()}var k={config:ie,openVideoEditor:ne};function oe(){k.config({channelId:"1"}),k.openVideoEditor({}),console.log("wochit-snippet","0.0.0",window.wt)}oe()})();
//# sourceMappingURL=wochit-snippet.iife.min.js.map
