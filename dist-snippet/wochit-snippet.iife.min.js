var oe=Object.defineProperty;var x=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var k=(c,n,s)=>n in c?oe(c,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[n]=s,v=(c,n)=>{for(var s in n||(n={}))ne.call(n,s)&&k(c,s,n[s]);if(x)for(var s of x(n))ae.call(n,s)&&k(c,s,n[s]);return c};(function(){"use strict";const c="@wochit/embedded:",n="wochit-embedded-container",s="wtInsideIframe",E="wochit-embedded-iframe",G=".wochit.com",W={test:"https://shortcut-test.wochit.com/","test-local":"https://localhost.wochit.com:8080/","test-docker":"https://fb-self-serve-shortcut.wochit.com/",stage:"https://shortcut-stage.wochit.com/",prod:"https://shortcut.wochit.com/","prod-local":"https://localhost.wochit.com:8080/"};var b;(function(t){t.SHORTCUT_READY="shortcutLoaded",t.STUDIO_READY="studioLoaded",t.APPLICATION_EVENT="APPLICATION_EVENT"})(b||(b={}));var _;(function(t){t.SHORTCUT_OPTIONS="shortcutOptions",t.STUDIO_OPTIONS="studioOptions"})(_||(_={}));function O(){}function H(t){return t instanceof HTMLElement}function m(t){return t===!0||t===!1}function u(t){return typeof t=="string"&&t.length>0}function z(t){return typeof t=="number"&&Number.isFinite(t)}function V(t){return t instanceof Array&&t.length>0}function p(t){return typeof t=="object"&&t!==null}function S(t){console==null||console.error(c,t)}function Y(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)}function J(t){return t.trim().replace(/\s+/gm," ")}var q=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},T;class B{constructor(e){T.set(this,["test","prod","stage","test-local","prod-local","test-docker"]),Object.defineProperty(this,"channelId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"organizationId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isShownInModal",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"idpServiceName",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"ssoUrl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"env",{enumerable:!0,configurable:!0,writable:!0,value:"prod"});for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=e[i]);z(this.organizationId)||(this.organizationId=null),m(this.verbose)||(this.verbose=!1),u(this.env)&&q(this,T,"f").indexOf(this.env)>=0||(this.env="prod"),m(this.isShownInModal)||(this.isShownInModal=!0),u(this.idpServiceName)||(this.idpServiceName=null),u(this.ssoUrl)||(this.ssoUrl=null)}}T=new WeakMap;class K{constructor(e){var i;Object.defineProperty(this,"containerEl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"userToken",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"linkedFields",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"videoContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"categoryNames",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"storyboardId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"videoId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"videoTitle",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"showCreativeGallery",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"showUploadGallery",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"galleryAssets",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"destLanguage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"showSaveForLater",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"on",{enumerable:!0,configurable:!0,writable:!0,value:{ready:O}}),Object.defineProperty(this,"kalturaProperties",{enumerable:!0,configurable:!0,writable:!0,value:null});for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this[r]=e[r]);H(this.containerEl)||(this.containerEl=null),u(this.userToken)||(this.userToken=null),p(this.linkedFields)||(this.linkedFields=null),u(this.videoContext)||(this.videoContext=null),u(this.categoryNames)||(this.categoryNames=null),u(this.storyboardId)||(this.storyboardId=null),u(this.videoId)||(this.videoId=null),u(this.videoTitle)||(this.videoTitle=null),m(this.showCreativeGallery)||(this.showCreativeGallery=!1),m(this.showUploadGallery)||(this.showUploadGallery=!1),V(this.galleryAssets)||(this.galleryAssets=null),u(this.destLanguage)||(this.destLanguage=null),m(this.showSaveForLater)||(this.showSaveForLater=!1),this.on=p(this.on)?this.on:{ready:O},typeof((i=this.on)==null?void 0:i.ready)!="function"&&(this.on.ready=O)}}function X(t){const e=document.createElement("DIV");return e.dataset.uuid=t,e.classList.add(n),e}function Q(t,e){const i=document.createElement("IFRAME");return i.dataset.uuid=t,i.id=s,i.classList.add(E),i.setAttribute("allow","fullscreen *; microphone *;camera *;display-capture *;"),i.setAttribute("src",e),i}function Z(t){const e=document.createElement("STYLE");return e.dataset.uuid=t,e.textContent=J(`
    .${n}[data-uuid="${t}"]:not(:empty) {
      position: fixed;
      height: 100%;
      width: 100%;
      top: 0;
      left: 0;
      padding: 5vh 5vw;
      box-sizing: border-box;
      background: rgba(0, 0, 0, 0.6);
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .${n}[data-uuid="${t}"]:not(:empty) .${E} {
      width: 100%;
      height: 100%;
      border: none;
    }
  `),e}var o=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},C=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,i,r,f){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!f:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?f.call(t,i):f?f.value=i:e.set(t,i),i},a,h,d,A,j,$,I,L,R,N,U,M,F;let w,l;class ee{constructor(){a.add(this),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),h.set(this,Y()),d.set(this,null),window.addEventListener("message",e=>{o(this,a,"m",R).call(this,e)&&o(this,a,"m",N).call(this,e)})}log(...e){this.verbose&&(console==null||console.log(c,...e))}setContext(e,i){w=e,l=i}openShortcut(){o(this,a,"m",$).call(this)&&o(this,a,"m",I).call(this),o(this,a,"m",L).call(this)}}h=new WeakMap,d=new WeakMap,a=new WeakSet,A=function(){return document.querySelector(`.${n}[data-uuid="${o(this,h,"f")}"]`)},j=function(){return document.querySelector(`.${E}[data-uuid="${o(this,h,"f")}"]`)},$=function(){return!!o(this,a,"m",j).call(this)},I=function(){var e;(e=o(this,a,"m",A).call(this))==null||e.replaceChildren(),C(this,d,null,"f")},L=function(){let e=l.containerEl;e?(e.dataset.uuid=o(this,h,"f"),e.classList.add(n)):(e=o(this,a,"m",A).call(this),e||(e=X(o(this,h,"f")),document.body.appendChild(e)));const i=Z(o(this,h,"f"));e.appendChild(i);const r=`${W[w.env]}?t=${Date.now()}`;C(this,d,Q(o(this,h,"f"),r),"f"),e.appendChild(o(this,d,"f"))},R=function(e){return new URL(e.origin).hostname.endsWith(G)&&p(w)&&p(l)&&o(this,d,"f")!==null},N=function(e){var i;this.log("#onMessage",e.data),e.data===b.SHORTCUT_READY?o(this,a,"m",U).call(this):e.data===b.STUDIO_READY?o(this,a,"m",M).call(this):typeof e.data=="object"&&((i=e.data)==null?void 0:i.type)===b.APPLICATION_EVENT&&o(this,a,"m",F).call(this,e)},U=function(){var e,i,r;l.on.ready((e=o(this,d,"f"))==null?void 0:e.contentWindow),(r=(i=o(this,d,"f"))==null?void 0:i.contentWindow)==null||r.postMessage(v({cmd:_.SHORTCUT_OPTIONS,version:"0.0.0",JWT:l.userToken},JSON.parse(JSON.stringify(v(v({},w),l)))),W[w.env])},M=function(){var e,i;(i=(e=o(this,d,"f"))==null?void 0:e.contentWindow)==null||i.postMessage({cmd:_.STUDIO_OPTIONS,JWT:l.userToken,kalturaProperties:l.kalturaProperties,isReEditing:!!l.videoId},"*")},F=function(e){var r,f;const i=e.data.event.toLowerCase();this.log("#onShortcutApplicationEvent",i,e.data.payload),typeof l.on[i]=="function"&&((f=l==null?void 0:(r=l.on)[i])==null||f.call(r,e.data.payload)),i==="abort"&&o(this,a,"m",I).call(this)};let g,P;const y=new ee;function te(t){if(p(t)){if(!u(t.channelId)){S("calling config() without channelId");return}}else{S("calling config() without options");return}g=new B(t),y.verbose=g.verbose,y.log("config",g)}function ie(t){if(!g){S("calling openShortcut() before config()");return}P=new K(p(t)?t:{}),y.log("openShortcut",P),y.setContext(g,P),y.openShortcut()}var D={config:te,openShortcut:ie};function re(){D.config({channelId:"1"}),D.openShortcut({}),console.log("wochit-snippet","0.0.0",window.wt)}re()})();
//# sourceMappingURL=wochit-snippet.iife.min.js.map
