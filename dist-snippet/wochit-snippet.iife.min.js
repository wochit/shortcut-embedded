var oe=Object.defineProperty;var F=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var V=(l,o,s)=>o in l?oe(l,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[o]=s,m=(l,o)=>{for(var s in o||(o={}))re.call(o,s)&&V(l,s,o[s]);if(F)for(var s of F(o))ae.call(o,s)&&V(l,s,o[s]);return l};(function(){"use strict";const l="@wochit/embedded:",o="wochit-embedded-container",s="wochit-embedded-iframe",u="wochit-embedded-mounted",W="wochit-embedded-spinner",B=".wochit.com";var b;(function(e){e.SHORTCUT_LOADED="shortcutLoaded",e.STUDIO_LOADED="studioLoaded",e.APPLICATION_EVENT="APPLICATION_EVENT"})(b||(b={}));var S;(function(e){e.SHORTCUT_OPTIONS="shortcutOptions",e.STUDIO_OPTIONS="studioOptions"})(S||(S={}));const h={SKIP_LOGIN:!1,VERBOSE:!1,ENV_URL:"https://shortcut.wochit.com",CALLBACK_LOADED:H};function H(){}function K(e){return e instanceof HTMLElement}function L(e){return e===!0||e===!1}function O(e){return typeof e=="string"&&e.length>0}function E(e){return typeof e=="object"&&e!==null}function g(e){console==null||console.error(l,e)}function G(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)}function J(e){return e.trim().replace(/\s+/gm," ")}class z{constructor(t){Object.defineProperty(this,"channelId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"userToken",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"skipLogin",{enumerable:!0,configurable:!0,writable:!0,value:h.SKIP_LOGIN}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:h.VERBOSE});for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this[n]=t[n]);L(this.skipLogin)||(this.skipLogin=h.SKIP_LOGIN),L(this.verbose)||(this.verbose=!1),O(this.envUrl)||(this.envUrl=h.ENV_URL)}}class q{constructor(t){var n;Object.defineProperty(this,"envUrl",{enumerable:!0,configurable:!0,writable:!0,value:h.ENV_URL}),Object.defineProperty(this,"containerEl",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isShownInModal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"videoId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"on",{enumerable:!0,configurable:!0,writable:!0,value:{loaded:h.CALLBACK_LOADED}});for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(this[a]=t[a]);K(this.containerEl)||(this.containerEl=null),L(this.isShownInModal)||(this.isShownInModal=!this.containerEl),O(this.videoId)||(this.videoId=null),this.on=E(this.on)?this.on:{loaded:h.CALLBACK_LOADED},typeof((n=this.on)==null?void 0:n.loaded)!="function"&&(this.on.loaded=h.CALLBACK_LOADED)}}function Y(e){const t=document.createElement("DIV");return t.dataset.uuid=e,t.classList.add(o),t}function X(){const e=document.createElement("DIV");return e.classList.add(W),e}function Q(e,t){const n=document.createElement("IFRAME");return n.dataset.uuid=e,n.classList.add(s),n.setAttribute("allow","fullscreen *; microphone *;camera *;display-capture *;"),n.setAttribute("src",t),n}function Z(e){const t=document.createElement("STYLE");return t.dataset.uuid=e,t.textContent=J(`
    .${u} {
      overscroll-behavior-x: none;
      overflow: hidden;
    }
    .${u} .${o} {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.6);
    }
    .${u} .${o} .${W} {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 50px;
      margin-left: -40px;
      margin-top: -25px;
      background-image: url("data:image/svg+xml,%3Csvg width='38' height='38' viewBox='0 0 38 38' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient x1='8.042%25' y1='0%25' x2='65.682%25' y2='23.865%25' id='a'%3E%3Cstop stop-color='%2306A9F4' stop-opacity='0' offset='0%25'/%3E%3Cstop stop-color='%2306A9F4' stop-opacity='.331' offset='63.146%25'/%3E%3Cstop stop-color='%2306A9F4' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(1 1)'%3E%3Cpath d='M36 18c0-9.94-8.06-18-18-18' id='Oval-2' stroke='url(%23a)' stroke-width='2'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/path%3E%3Ccircle fill='%2306A9F4' cx='36' cy='18' r='1'%3E%3CanimateTransform attributeName='transform' type='rotate' from='0 18 18' to='360 18 18' dur='0.9s' repeatCount='indefinite' /%3E%3C/circle%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-size: 100% 100%;
    }
    .${u} .${o} .${s} {
      border: none;
      width: 100%;
      height: 100%;
    }
    @media (min-width: 1440px) {
      .${u} .${o} .${s} {
        max-width: 90%;
        max-height: 90%;
        min-width: 1280px;
      }
    }
    @media (max-width: 1440px) {
      .${u} .${o} .${s} {
        max-width: 100%;
        max-height: 100%;
      }
    }
  `),t}var i=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(e):a?a.value:t.get(e)},y=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,a,f){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!f:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?f.call(e,n):f?f.value=n:t.set(e,n),n},d,p,c,_,$,P,D,I,U,T,N,x,M,R,j;let v,r;class ee{constructor(){d.add(this),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),p.set(this,G()),c.set(this,null),_.set(this,null),window.addEventListener("message",t=>{i(this,d,"m",N).call(this,t)&&i(this,d,"m",x).call(this,t)})}log(...t){this.verbose&&(console==null||console.log(l,...t))}setContext(t,n){v=t,r=n}openShortcut(){i(this,d,"m",D).call(this)&&i(this,d,"m",I).call(this),i(this,d,"m",U).call(this)}}p=new WeakMap,c=new WeakMap,_=new WeakMap,d=new WeakSet,$=function(){return document.querySelector(`.${o}[data-uuid="${i(this,p,"f")}"]`)},P=function(){return document.querySelector(`.${s}[data-uuid="${i(this,p,"f")}"]`)},D=function(){return!!i(this,d,"m",P).call(this)},I=function(){var t;r.containerEl?r.containerEl.replaceChildren():(t=i(this,d,"m",$).call(this))==null||t.remove(),y(this,c,null,"f"),document.body.classList.remove(u)},U=function(){let t=r.containerEl;const n=document.createDocumentFragment();if(t?(t.dataset.uuid=i(this,p,"f"),t.classList.add(o)):t=Y(i(this,p,"f")),!r.containerEl){const f=Z(i(this,p,"f"));n.appendChild(f)}y(this,_,X(),"f"),n.appendChild(i(this,_,"f"));const a=`${r.envUrl}?t=${Date.now().toString(36)}`;y(this,c,Q(i(this,p,"f"),a),"f"),n.appendChild(i(this,c,"f")),t.appendChild(n),r.containerEl||document.body.appendChild(t),document.body.classList.add(u)},T=function(){var t;(t=i(this,_,"f"))==null||t.remove()},N=function(t){return new URL(t.origin).hostname.endsWith(B)&&E(v)&&E(r)&&i(this,c,"f")!==null},x=function(t){this.log("#onMessage",t.data),t.data===b.SHORTCUT_LOADED?i(this,d,"m",M).call(this):t.data===b.STUDIO_LOADED?i(this,d,"m",R).call(this):t.data&&typeof t.data=="object"&&t.data.type===b.APPLICATION_EVENT&&typeof t.data.type=="string"&&i(this,d,"m",j).call(this,t)},M=function(){!i(this,c,"f")||!i(this,c,"f").contentWindow||(r.on.loaded(i(this,c,"f")),i(this,c,"f").contentWindow.postMessage(m({cmd:S.SHORTCUT_OPTIONS,version:"0.0.0",JWT:r.userToken},JSON.parse(JSON.stringify(m(m({},v),r)))),r.envUrl),i(this,d,"m",T).call(this))},R=function(){!i(this,c,"f")||!i(this,c,"f").contentWindow||(r.on.loaded(i(this,c,"f")),i(this,c,"f").contentWindow.postMessage(m({cmd:S.STUDIO_OPTIONS,version:"0.0.0",JWT:r.userToken,isReEditing:!!(r!=null&&r.videoId)},JSON.parse(JSON.stringify(m(m({},v),r)))),"*"),i(this,d,"m",T).call(this))},j=function(t){const n=t.data.event.toLowerCase();this.log("#onShortcutApplicationEvent",n,t.data.payload);const a=r.on[n];typeof a=="function"&&a(t.data.payload),n==="abort"&&i(this,d,"m",I).call(this)};let w,C;const A=new ee;function te(e){if(E(e))if(O(e.channelId)){if(!O(e.userToken)&&e.skipLogin!==!0){g("calling config() without userToken");return}}else{g("calling config() without channelId");return}else{g("calling config() without options");return}w=new z(e),A.verbose=w.verbose,A.log("config",w)}function ne(e){if(!w){g("calling openShortcut() before config()");return}C=new q(E(e)?e:{});try{new URL(C.envUrl)}catch{g(`calling openShortcut() with invalid envUrl: "${e==null?void 0:e.envUrl}"`);return}A.log("openShortcut",C),A.setContext(w,C),A.openShortcut()}var k={config:te,openShortcut:ne};function ie(){k.config({channelId:"1"}),k.openShortcut({}),console.log("wochit-snippet","0.0.0",window.wt)}ie()})();
//# sourceMappingURL=wochit-snippet.iife.min.js.map
