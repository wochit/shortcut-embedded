# Embed Wochit Video Creator


## Install the Wochit JavaScript module

You can install the Wochit JavaScript module as an NPM package or set an HTML script snippet.


<code-group>

<code-block title="NPM" active>
```sh
npm i @wochit/embedded
```
</code-block>

<code-block title="PNPM">
```sh
pnpm add @wochit/embedded
```
</code-block>

<code-block title="YARN">
```sh
yarn add @wochit/embedded
```
</code-block>

<code-block title="HTML">
```html
<script type="application/javascript">
(function (window, document, tag, url, name, a, m) {
    window['__wochit_object_name__'] = name;
    window[name] =
      window[name] ||
      function () {
        (window[name].q = window[name].q || []).push(arguments);
};
    (a = document.createElement(tag)), (m = document.getElementsByTagName(tag)[0]);
    a.async = 1;
    a.src = url;
    m.parentNode.insertBefore(a, m);
  })(window, document, 'script', 'https://embedded.wochit.com/latest.min.js', ‘wochit’);
</script>
```
</code-block>

</code-group>





## Set configuration

Call config() to set up the integration context. It must be called only once in the scope where *Client ID* and *userToken* are easily available. 


<code-group>
<code-block title="Module" active>
```js
import { config } from '@wochit/embedded';

config({ clientId, userToken });
```
</code-block>

<code-block title="HTML">
```js
window.wt('config', { clientId, userToken });
```
</code-block>

</code-group>

*** 
**clientId** <code>string</code> <Badge text="Required" type="warning"/>  
This is your unique *Client ID*. Get your *Client ID* [here!](https://admin.wochit.com/settings)
***  
**userToken** <code>string</code> <Badge text="Required" type="warning"/>  
A user token that is generated by you every time a user accesses the video creator.  
Get a user’s token [here](/authentication.html#user-authentication).
***



## Open the video creator

Call openVideoCreator() to open the video creation application.   
Create a button to trigger openVideoCreator() using the following example:  


<code-group>
<code-block title="Module" active>
```js
import { openVideoCreator } from '@wochit/embedded';

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  openVideoCreator({
    videoContext: 'my-page-context',
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  }); 
});
```
</code-block>

<code-block title="HTML">
```js
document.querySelector('.video-creator-btn').addEventListener('click', () => {
  window.wt('openVideoCreator', {
    videoContext: 'my-page-context',
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  });
});
```
</code-block>

</code-group>


#### You can customize the video creator by using the following properties:  
*** 
**videoContext** <code>string</code> <Badge text="Optional" />   
This property can be set as a unique identifier. This can be a customer ID, a page ID, or similar, and can be used to reconcile the produced video with your internal systems. [We will send it back](/webhook.html) with the produced video so you can know where the video belongs to.   
*Sending videoContext is highly recommended*
*** 
**on** <code>object</code> <Badge text="Optional" />   
We trigger events while the user is using the video creator. This is an object that combines application triggered events callbacks.
For more information see [Triggered Events](/embed.html#triggered-events).
***  
**showCreativeGallery** <code>boolean</code> <Badge text="Optional" />   
Whether to show the Getty Images creative media library search in the Creative tab. This will allow your user to use licensed media assets. You can read more about how [personalize the user experience](/embed.html#personalize-the-experience).
***
**showUploadGallery** <code>boolean</code> <Badge text="Optional" />  *(default can be set up in the [admin panel](https://admin.wochit.com/my-video-creator))*  
Whether to show the tab that allows users to upload custom media. You can read more about how [personalize the user experience](/embed.html#personalize-the-experience).
***
**destLanguage** <code>string</code> <Badge text="Optional" /> *(default can be set up in the [admin panel](https://admin.wochit.com/my-video-creator))*     
Pass language code to adjust the Video Editor UI. Available options are: en, fr, es, de, ja, it, es, svg, da and nb. 
***
**galleryAssets** <code>object[]</code> <Badge text="Optional" />  
You may pass an array of objects containing lists with images / video URLs. The video creator will display these assets under the "My Gallery" tab, as the end-user will be able to choose an asset from the given list to be used in the video.
***
**linkedFields** <code>object</code> <Badge text="Optional" />  
Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user.   
You can [personalize the user experience](/embed.html#personalize-the-experience) by sending an array of personal data injected to the video.
***
**categoryNames** <code>string[]</code> <Badge text="Optional" />  *(default can be set up in the [admin panel](https://admin.wochit.com/my-video-creator))*  
Template categories are selected in the Admin Panel. You can set the video creator to display templates of specific categories by sending a comma-separated list of category names. 
***
**videoId** <code>string</code> <Badge text="Optional" />  
You can open the video editor in editing mode of a specific video that has been previously produced. Note: We assign a new Wochit video ID to the edited video. You will be able to get it once the [user clicked to produce the video](/embed.html#triggered-events). 
***
**containerEl** <code>HTMLElement</code> <Badge text="Optional" />  
By default, the video creator app will open in a modal on your website.
If you wish to embed the video creator app as an inline element inside a page, you can pass a container element to the containerEl property:
```javascript
var videoCreatorContainer = document.createElement('div');
openVideoCreator({
  containerEl: videoCreatorContainer
});
```
***


Need any code examples? See some use cases here. 

## Triggered Events
The following events will be triggered as the user interacts with the video creator widget. You are welcome to add implement callback functions on your side and react to any of these events.

<code>on.loaded</code>
Triggered when video Creator resources has been loaded.  

<code>on.ready</code>
Triggered when video Creator is ready to use and user can start working.  

<code>on.abort</code>
Triggered when the user clicked to close the Video Creator.  

<code>on.produce</code>
Triggered when the user clicked to produce the video. We send a payload with the wochit videoId.  
Payload example:
```json
{ 
       videoId: "6094092472a9105747957aa3",
       videoState: "PROCESSING",
       videoUrl: null
}
```
*add description of properties  
<code>on.produce_done</code>


Triggered when video has been produced. We send a payload with a link to the video and some additional data.   
Payload example:

<code-group>
<code-block title="Success" active>
```json
{
  state: "DONE",
  videoId: "6094092472a9105747957aa3",
  duration: 35.192, 
  videoContext: "string-sent-when-opened-the-video-creator",
  title: "The video title",
  videoUrl: "https://example.com/direct-link-to-video",
  thumbnailUrl: "http://example.com/direct-link-to-thumbnail",
}
```
</code-block>

<code-block title="Failure - (Rare)">
```json
{
  state: "FAILED",
  videoId: "6094092472a9105747957aa3",
  duration: null,
  videoContext: null,
  title: null,
  videoUrl: null,
  thumbnailUrl: null
}
```
</code-block>

</code-group>

### Attributes:
***
**state** <code>string</code>   
This property indicates the state of the video. 'DONE' means that the video has been produced successfully. 'FAILED' means that the video production failed. 
***
**wochitVideoId** <code>string</code>  
Wochit unique identifier for this video. You can use it to [re-edit the video](/embed.html#you-can-customize-the-video-creator-by-using-the-following-properties). 
***
**duration** <code>float</code>  
The video duration in seconds. 
***
**videoContext** <code>string</code>  
String initiated when calling openVideoCreator(). [videoContext](/embed.html#you-can-customize-the-video-creator-by-using-the-following-properties) connects the video to the video creator instance, so you can know where the video belongs to. 
***
**title** <code>string</code>  
The title of the video. The user can edit the video title in the video creator.  
***
**videoUrl** <code>string</code>  
Direct link to the video. Links have an expiration time of X minutes so you should download it to your system and use your own CDN.  
***
**thumbnailUrl** <code>string</code>  
Direct link to the thumbnail of the video. Links have an expiration time of X minutes so you should download it to your system and use your own CDN.  
***


::: danger Important!
Getting the produced video by listening to the <code>produce_done</code> event is less secured. We recommend implementing a listener to [a webook endpoint](/webhook.html).

:::

Need any technical assistance? Click on the bubble at the bottom right side of the screen to chat with us!


## Personalize the Experience

We allow you to set the default configuration to all users in our [admin panel](https://admin.wochit.com/my-video-creator), but sometimes you need to personalize the experience for specific users. It can be by adding more features to premium users or set up different UI language for different users.

### Allow access to stock images and videos
You can let your users enjoy unlimited rights-cleared access to the entire Getty image and video creative library.
The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Advanced -> Stock photos & videos*. You can override it by setting **showCreativeGallery** property to *true* or *false* in the openVideoCreator() function. 

[image of getty library in SC]
***
### Allow the user to upload images and videos
You can let users the option to allow upload their own content from their device to be used in the video they create. The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Advanced -> Allow self uploads*. You can override it by setting **showUploadGallery** property to *true* or *false* in the openVideoCreator() function.

[image of self upload tab in SC]
***
### Set UI language
You can set the UI language of the video creator.     
The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Localization -> Language*. You can override it by setting **destLanguage** property in the openVideoCreator() function to one of the supported languages below:
| Language        | Value           | 
| ------------- |:-------------:| 
| English(US)      | en | 
| German     | de      |  
| French | fr     | 
| Japanese | ja      | 
| Italian | it      | 
| Spanish | es      | 
| Swedish | svg      | 
| Danish | da      | 
| Norwegian | nb      | 


Note: Our default language is English. Template titles will not be translated from English. 
***

### Add personal asset gallery
You may pass an array of objects containing lists with images / video URLs. The video creator will display these assets under the "My Gallery" tab, as the end-user will be able to choose an asset from the given list to be used in the video. 
```javascript
galleryAssets: [
  {
    title: 'My Project',
    assets: [
      {
        url: 'https://cdn1.sample.com/image1.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail.jpg'
        duration: 2.21, 
        type: 'video',
      },
    ],
  },
  {
    title: 'My Profile',
    assets: [
      {
        url: 'https://cdn1.sample.com/image2.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video2.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail2.jpg'
        duration: 5.21, 
        type: 'video',
      },
    ],
  },
]
```

Set **galleryAssets** property in openVideoCreator() to be a list of objects. Each object is a folder having a *title* and an array of *assets*:  
**title** <code>string</code> <Badge text="Required" type="warning"/> 
This is the name of the folder.  
***
**assets** <code>object[]</code> <Badge text="Required" type="warning"/> 
An array of assets object. Each asset has the following properties: 

- **type** <code>string</code> <Badge text="Required" type="warning"/>  
The type of the asset. Can be *image* or *video*. 
***
- **url** <code>string</code> <Badge text="Required" type="warning"/>  
Direct link to the media asset. This should be a cross-origin link that is available for us to download.   
Supported formats: png, jpeg for images and mp4 and mov for video assets. 
***
- **thumbnailUrl** <code>string</code> <Badge text="Required*" type="warning"/> (*If the asset is a *video*)   
Direct link to the video thumbnail. This should be a cross-origin link that is available for us to download.  
Supported formats: png and jpeg.
***
- **duration** <code>float</code> <Badge text="Required*" type="warning"/> (*If the asset is a *video*)   
The video duration in seconds. 
***


### Category selection

You can control which template each user has access to. The default templates can be selected in the [admin panel](https://admin.wochit.com/my-video-creator) under *Templates*. You can override it by setting **categoryNames** property to a list of category names in the openVideoCreator() function. 
```javascript
categoryNames: 'Food,Health & Wellness,Story Telling,TikTok'
```
Here's a full list of available template categories: 

**Segment:** 
- DIY
- Ecommerce
- Food
- Travel
- Trainers
- Education
- Health & Wellness  

**Use-Case:**  
- Profile
- Brand & Marketing
- Sales
- Promotion
- User-Generated
- Video Tutorial
- How To  
- Case Study
- Community Relations
- Product Review  

**Complexity:**  
- Express Message
- Short Message
- Story Telling  

**Platform:**  
- TikTok
- YouTube
- Facebook
- Instagram

### Linked fields

Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user.   
You can personalize the user experience by sending an array of personal data injected to the video.

[we might remove this for MVP]


## Code Examples


Use Case:


Add info here. 



<code-group>
<code-block title="Module" active>
```js
import { openVideoCreator } from '@wochit/embedded';

var galleryAssets = [
  {
    "title": "Swiss Alpine Resort",
    "assets": [
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010487.jpg?k=5288eeeb88268f6b680b74017eecdd6b242813a87e30dc10124dd51087d7ae1c&o=",
        "type": "image"
      },
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010490.jpg?k=9c14c57cb69f550e3b1f8a649001395f587a800c5cd972b2051451e8841d6595&o=",
        "type": "image"
      }
    ]
  },
  {
    "title": "Linder Grand Hotel",
    "assets": [
      {
        "url": "https://pix8.agoda.net/hotelImages/8947507/0/d6e91ea13a7a551fb1940665d960f96b.jpg?s=1024x768",
        "type": "image"
      },
      {
        "url": "https://pix8.agoda.net/hotelImages/4877643/0/03b577ed097bd23b5eb7cc29bed93679.jpg?ca=23&ce=0&s=1024x768",
        "type": "image"
      }
    ]
  }
];

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  openVideoCreator({
    videoContext: 'my-page-context',
    destLanguage: 'en',
    categoryNames: null,
    galleryAssets,
    linkedFields,
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  }); 
});
```
</code-block>

<code-block title="HTML">
```js
window.wt('config', { clientId, userToken });

var galleryAssets = [
  {
    "title": "Swiss Alpine Resort",
    "assets": [
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010487.jpg?k=5288eeeb88268f6b680b74017eecdd6b242813a87e30dc10124dd51087d7ae1c&o=",
        "type": "image"
      },
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010490.jpg?k=9c14c57cb69f550e3b1f8a649001395f587a800c5cd972b2051451e8841d6595&o=",
        "type": "image"
      }
    ]
  },
  {
    "title": "Linder Grand Hotel",
    "assets": [
      {
        "url": "https://pix8.agoda.net/hotelImages/8947507/0/d6e91ea13a7a551fb1940665d960f96b.jpg?s=1024x768",
        "type": "image"
      },
      {
        "url": "https://pix8.agoda.net/hotelImages/4877643/0/03b577ed097bd23b5eb7cc29bed93679.jpg?ca=23&ce=0&s=1024x768",
        "type": "image"
      }
    ]
  }
];

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  window.wt('openVideoCreator', {
    videoContext: 'my-page-context',
    destLanguage: 'en',
    categoryNames: null,
    galleryAssets,
    linkedFields,
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  });
});
```
</code-block>

</code-group>


The video creator will open with the 
=======
Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user. 
Each template can receive a JSON object as in the example below:
