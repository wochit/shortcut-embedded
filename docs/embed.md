# Embed Wochit Video Creator


## Install the Wochit JavaScript module

You can install the Wochit JavaScript module as an NPM package or set an HTML script snippet.


<code-group>

<code-block title="NPM" active>
```sh
npm i @wochit/embedded
```
</code-block>

<code-block title="PNPM">
```sh
pnpm add @wochit/embedded
```
</code-block>

<code-block title="YARN">
```sh
yarn add @wochit/embedded
```
</code-block>

<code-block title="HTML">
```html
<script type="application/javascript">
(function (window, document, tag, url, name, a, m) {
    window['__wochit_object_name__'] = name;
    window[name] =
      window[name] ||
      function () {
        (window[name].q = window[name].q || []).push(arguments);
};
    (a = document.createElement(tag)), (m = document.getElementsByTagName(tag)[0]);
    a.async = 1;
    a.src = url;
    m.parentNode.insertBefore(a, m);
  })(window, document, 'script', 'https://cdn.wochit.com/wochit-embedded/latest.min.js', ‘wochit’);
</script>
```
</code-block>

</code-group>





## Set configuration

Call config() to set up the integration context. It must be called only once in the scope where *client_id* and *user-token* are easily available. 


<code-group>
<code-block title="Module" active>
```js
import { config } from '@wochit/embedded';

config({ clientId, userToken });
```
</code-block>

<code-block title="HTML">
```js
window.wt('config', { clientId, userToken });
```
</code-block>

</code-group>

*** 
**clientId** <code>string</code> <Badge text="Required"/>  
This is your unique *client_id*. Get your api keys [here!](https://admin.wochit.com/settings)
***  
**userToken** <code>string</code> <Badge text="Required"/>  
A user token that is generated by you every time a user accesses the video creator.  
Get a user’s token [here](/authentication.html#user-authentication).
***



## Open the video creator

Call openVideoCreator() to open the video creation application in iframe. This javascript should be launched from your site.


<code-group>
<code-block title="Module" active>
```js
import { openVideoCreator } from '@wochit/embedded';

var galleryAssets = [
  {
    "title": "Swiss Alpine Resort",
    "assets": [
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010487.jpg?k=5288eeeb88268f6b680b74017eecdd6b242813a87e30dc10124dd51087d7ae1c&o=",
        "type": "image"
      },
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010490.jpg?k=9c14c57cb69f550e3b1f8a649001395f587a800c5cd972b2051451e8841d6595&o=",
        "type": "image"
      }
    ]
  },
  {
    "title": "Linder Grand Hotel",
    "assets": [
      {
        "url": "https://pix8.agoda.net/hotelImages/8947507/0/d6e91ea13a7a551fb1940665d960f96b.jpg?s=1024x768",
        "type": "image"
      },
      {
        "url": "https://pix8.agoda.net/hotelImages/4877643/0/03b577ed097bd23b5eb7cc29bed93679.jpg?ca=23&ce=0&s=1024x768",
        "type": "image"
      }
    ]
  }
];

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  openVideoCreator({
    videoContext: 'my-page-context',
    destLanguage: 'en',
    categoryNames: null,
    galleryAssets,
    linkedFields,
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  }); 
});
```
</code-block>

<code-block title="HTML">
```js
window.wt('config', { clientId, userToken });

var galleryAssets = [
  {
    "title": "Swiss Alpine Resort",
    "assets": [
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010487.jpg?k=5288eeeb88268f6b680b74017eecdd6b242813a87e30dc10124dd51087d7ae1c&o=",
        "type": "image"
      },
      {
        "url": "https://q-xx.bstatic.com/xdata/images/hotel/840x460/271010490.jpg?k=9c14c57cb69f550e3b1f8a649001395f587a800c5cd972b2051451e8841d6595&o=",
        "type": "image"
      }
    ]
  },
  {
    "title": "Linder Grand Hotel",
    "assets": [
      {
        "url": "https://pix8.agoda.net/hotelImages/8947507/0/d6e91ea13a7a551fb1940665d960f96b.jpg?s=1024x768",
        "type": "image"
      },
      {
        "url": "https://pix8.agoda.net/hotelImages/4877643/0/03b577ed097bd23b5eb7cc29bed93679.jpg?ca=23&ce=0&s=1024x768",
        "type": "image"
      }
    ]
  }
];

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  window.wt('openVideoCreator', {
    videoContext: 'my-page-context',
    destLanguage: 'en',
    categoryNames: null,
    galleryAssets,
    linkedFields,
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  });
});
```
</code-block>

</code-group>


You can customize the video creator by using the following properties:  

*** 
**on** <code>object</code> <Badge text="Optional" type="warning"/>   
We fire events while the user is using the video creator. This is an object that combains application triggered events callbacks.
For more information see [Triggered Events](/embed.html#triggered-events). 
*** 
**videoContext** <code>string</code> <Badge text="Optional" type="warning"/>   
This property can be set as a unique identifier in the openVideoCreator() function. We will send it back [link to webhooks] with the produced video so you can know where the video belongs to.   
*Sending videoContent is highly recommended*
***  
**showCreativeGallery** <code>boolean</code> <Badge text="Optional" type="warning"/> *(default: true)*  
Whether to show the Getty Images creative media library search in the Creative tab. This will allow your user to use licensed media assets [change text here that emphesize how great this library is].
***
**showUploadGallery** <code>boolean</code> <Badge text="Optional" type="warning"/> *(default: true)*   
Whether to show the tab that allows users to upload custom media 
***
**destLanguage** <code>string</code> <Badge text="Optional" type="warning"/>  *(default: en)*   
Pass language code to adjust the Video Editor UI. Available options are en-us,fr and es.
***
**galleryAssets** <code>object[]</code> <Badge text="Optional" type="warning"/>  
You may pass an array of objects containing lists with images / video URLs. The video creator will display these assets under the "My Gallery" tab, as the end-user will be able to choose an asset from the given list to be used in the video. 
**Maybe we should show it under " personolize the expirience" ?? and add ore data on the object that should be sent
```javascript
galleryAssets: [
  {
    title: 'My Project',
    assets: [
      {
        url: 'https://cdn1.sample.com/image1.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail.jpg'
        duration: 2.21, //in seconds
        type: 'video',
      },
    ],
  },
  {
    title: 'My Profile',
    assets: [
      {
        url: 'https://cdn1.sample.com/image2.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video2.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail2.jpg'
        duration: 5.21, //in seconds
        type: 'video',
      },
    ],
  },
]
```
***
**linkedFields** <code>object</code> <Badge text="Optional" type="warning"/>  
You can [personalize the user experience](/embed.html#personalize-the-experience) by sending an array of personal data injected to the video.
***
**categoryNames** <code>string[]</code> <Badge text="Optional" type="warning"/>  *(default: all available templates will be displayed)*  
Template categories are selected in the Admin Panel. You can set the video creator to display templates of specific categories by sending a comma-separated list of category names. 
***
**videoId** <code>string</code> <Badge text="Optional" type="warning"/>  
You can open the video editor in editing mode of a specific video that has been previously produced.
***
**containerEl** <code>JavaScript DOM node</code> <Badge text="Optional" type="warning"/>  
Add a container if you don’t wish to open the video creator in a pop up. 
This HTML element will replace the editor iframe.
```javascript
var modalContainer = document.createElement('div');
modalContainer.style = 'min-height:800px; background:white; position: absolute; top:50%;left:50%; width: 85%; height: 80%; transform:translate(-50%,-50%);';
modalContainer.classList.add('iframeContainer');
```
***


I might add here a full example of openVideoCreator



## Triggered Events
The following events will be triggered as the user interacts with the video creator widget. You are welcome to add listeners on your side and react to any of these events.

<code>on.loaded</code>
Video Creator resources has been loaded.  

<code>on.ready</code>
Video Creator is ready to use and user can start working.  

<code>on.abort</code>
User clicked to close the Video Creator.  

<code>on.produce</code>
User clicked to produce the video. We send a payload with the produced  
Payload example:
```json
{ 
       videoId: "6094092472a9105747957aa3",
       videoState: "PROCESSING",
       videoUrl: null
}
```

<code>on.produce_done</code>
Video has been produced. 
Payload example:

<code-group>
<code-block title="Success" active>
```json
{
  state: "DONE",
  videoId: "6094092472a9105747957aa3",
  duration: 35.192, // video duration in seconds
  videoContext: "string-sent-when-opened-the-video-creator",
  title: "The video title",
  videoUrl: "https://example.com/direct-link-to-video",
  thumbnailUrl: "http://example.com/direct-link-to-thumbnail",
}
```
</code-block>

<code-block title="Failure - (rare)">
```json
{
  state: "FAILED",
  videoId: "6094092472a9105747957aa3",
  duration: null,
  videoContext: null,
  title: null,
  videoUrl: null,
  thumbnailUrl: null
}
```
</code-block>

</code-group>

::: danger 
Getting the produced video by listening to the <code>produce_done</code> event is less secured. It's also irrelevant if the user has closed the video creator. We recommand implementing a listener to a webook endpoint [link to webhooks]

:::


## Personalize the Experience

Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user. 
Each template can receive a JSON object as in the example below: