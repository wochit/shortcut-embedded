# Embed Wochit Video Creator


## Install the Wochit JavaScript module

You can install the Wochit JavaScript module as an NPM package or set an HTML script snippet.


<code-group>

<code-block title="NPM" active>
```sh
npm i @wochit/embedded
```
</code-block>

<code-block title="PNPM">
```sh
pnpm add @wochit/embedded
```
</code-block>

<code-block title="YARN">
```sh
yarn add @wochit/embedded
```
</code-block>

<code-block title="HTML">
```html
<script type="application/javascript">
(function (window, document, tag, url, name, a, m) {
    window['__wochit_object_name__'] = name;
    window[name] =
      window[name] ||
      function () {
        (window[name].q = window[name].q || []).push(arguments);
};
    (a = document.createElement(tag)), (m = document.getElementsByTagName(tag)[0]);
    a.async = 1;
    a.src = url;
    m.parentNode.insertBefore(a, m);
  })(window, document, 'script', 'https://embedded.wochit.com/latest.min.js', ‘wochit’);
</script>
```
</code-block>

</code-group>





## Set configuration

Call config() to set up the integration context. It must be called only once in the scope where *Client ID* and *userToken* are easily available. 


<code-group>
<code-block title="Module" active>
```js
import { config } from '@wochit/embedded';

config({ clientId, userToken });
```
</code-block>

<code-block title="HTML">
```js
window.wt('config', { clientId, userToken });
```
</code-block>

</code-group>

*** 
**clientId** <code>string</code> <Badge text="Required" type="warning"/>  
This is your unique *Client ID*. Get your *Client ID* [here!](https://admin.wochit.com/settings)
***  
**userToken** <code>string</code> <Badge text="Required" type="warning"/>  
A user token that is generated by you every time a user accesses the video creator.  
Get a user’s token [here](/authentication.html#user-authentication).
***



## Open the video creator

Call openVideoCreator() to open the video creation application.   
Create a button to trigger openVideoCreator() using the following example:  


<code-group>
<code-block title="Module" active>
```js
import { openVideoCreator } from '@wochit/embedded';

document.querySelector('.video-creator-btn').addEventListener('click', () => {
  openVideoCreator({
    videoContext: 'my-page-context',
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  }); 
});
```
</code-block>

<code-block title="HTML">
```js
document.querySelector('.video-creator-btn').addEventListener('click', () => {
  window.wt('openVideoCreator', {
    videoContext: 'my-page-context',
    on: {
      loaded: ($iframe) => {
        console.log('loaded', $iframe);
      },
      ready: () => {
        console.log('ready');
      },
      abort: (payload) => {
        console.log('abort', payload);
      },
      produce: (payload) => {
        console.log('produce', payload);
      },
    },
  });
});
```
</code-block>

</code-group>


#### You can customize the video creator by using the following properties:  
*** 
**videoContext** <code>string</code> <Badge text="Optional" />   
This property can be set as a unique identifier. This can be a customer ID, a page ID, or similar, and can be used to reconcile the produced video with your internal systems. [We will send it back](/webhook.html) with the produced video so you can know where the video belongs to.   
*Sending videoContext is highly recommended*
*** 
**on** <code>object</code> <Badge text="Optional" />   
We trigger events while the user is using the video creator. This is an object that combines application triggered events callbacks.
For more information see [Triggered Events](/embed.html#triggered-events).
***  
**showCreativeGallery** <code>boolean</code> <Badge text="Optional" />   
Whether to show the Getty Images creative media library search in the Creative tab. You can allow users to enjoy unlimited rights-cleared access to the entire Getty image and video creative library.  
*(The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Advanced -> Stock photos & videos*.
)*   
***
**showUploadGallery** <code>boolean</code> <Badge text="Optional" />     
You can allow users the option to upload their own content from their device to be used in the video they create.   
*(The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Advanced -> Allow self uploads*.)*

***
**destLanguage** <code>string</code> <Badge text="Optional" />      
Pass language code to adjust the Video Editor UI. Available options are: en, es and de.  
*(The default value can be set in the [admin panel](https://admin.wochit.com/my-video-creator) under *Look & Feel -> Localization -> Language*.)*   
Note: Our default language is English. Template titles will not be translated from English.
***
**galleryAssets** <code>object[]</code> <Badge text="Optional" />  
You may pass an array of objects containing lists with images / video URLs. The video creator will display these assets under the "My Gallery" tab, as the end-user will be able to choose an asset from the given list to be used in the video.  
See how you can [personalize the user experience](/embed.html#add-personal-asset-gallery) by sending an array of the user's personal assets.
***
**linkedFields** <code>object</code> <Badge text="Optional" />  
Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user.   
You can [personalize the user experience](/embed.html#linked-fields) by sending an array of personal data injected to the video.
***
**categoryNames** <code>string[]</code> <Badge text="Optional" />     
Template categories are selected in the [admin panel](https://admin.wochit.com/my-video-creator) under *Templates*. You can set the video creator to display templates of specific categories by sending a comma-separated list of category names. 
```javascript
categoryNames: 'Food,Health & Wellness,Story Telling,TikTok'
```
Here's a [full list](/categories.html) of available template categories.
***
**videoId** <code>string</code> <Badge text="Optional" />  
You can open the video editor in editing mode of a specific video that has been previously produced. Note: We assign a new Wochit video ID to the edited video. You will be able to get it once the [user clicks to produce the video](/embed.html#triggered-events). 
***
**containerEl** <code>HTMLElement</code> <Badge text="Optional" />  
By default, the video creator app will open in a modal on your website.
If you wish to embed the video creator app as an inline element inside a page, you can pass a container element to the containerEl property:
```javascript
var videoCreatorContainer = document.createElement('div');
openVideoCreator({
  containerEl: videoCreatorContainer
});
```
***


Need any code examples? See some use cases here. 

## Triggered Events
The following events will be triggered as the user interacts with the video creator widget. You are welcome to add implement callback functions on your side and react to any of these events.

<code>on.loaded</code>
Triggered when the video Creator resources have been loaded.  

<code>on.ready</code>
Triggered when the video Creator is ready to use and the user can start working.  

<code>on.abort</code>
Triggered when the user clicked to close the Video Creator.  

<code>on.produce</code>
Triggered when the user clicked to produce the video. We send a payload with the wochit videoId.  
Payload example:
```json
{ 
       videoId: "6094092472a9105747957aa3",
       videoState: "PROCESSING",
       videoUrl: null
}
```
*add description of properties  
<code>on.produce_done</code>


Triggered when video has been produced. We send a payload with a link to the video and some additional data.   
Payload example:

<code-group>
<code-block title="Success" active>
```json
{
  state: "DONE",
  videoId: "6094092472a9105747957aa3",
  duration: 35.192, 
  videoContext: "string-sent-when-opened-the-video-creator",
  title: "The video title",
  videoUrl: "https://example.com/direct-link-to-video",
  thumbnailUrl: "http://example.com/direct-link-to-thumbnail",
}
```
</code-block>

<code-block title="Failure - (Rare)">
```json
{
  state: "FAILED",
  videoId: "6094092472a9105747957aa3",
  duration: null,
  videoContext: null,
  title: null,
  videoUrl: null,
  thumbnailUrl: null
}
```
</code-block>

</code-group>

### Attributes:
***
**state** <code>string</code>   
This property indicates the state of the video. 'DONE' means that the video has been produced successfully. 'FAILED' means that the video production failed. 
***
**wochitVideoId** <code>string</code>  
Wochit unique identifier for this video. You can use it to [re-edit the video](/embed.html#you-can-customize-the-video-creator-by-using-the-following-properties). 
***
**duration** <code>float</code>  
The video duration in seconds. 
***
**videoContext** <code>string</code>  
String initiated when calling openVideoCreator(). [videoContext](/embed.html#you-can-customize-the-video-creator-by-using-the-following-properties) connects the video to the video creator instance, so you can know where the video belongs to. 
***
**title** <code>string</code>  
The title of the video. The user can edit the video title in the video creator.  
***
**videoUrl** <code>string</code>  
Direct link to the video. Links have an expiration time of X minutes so you should download it to your system and use your own CDN.  
***
**thumbnailUrl** <code>string</code>  
Direct link to the thumbnail of the video. Links have an expiration time of X minutes so you should download it to your system and use your own CDN.  
***


::: danger Important!
Getting the produced video by listening to the <code>produce_done</code> event is less secure. We recommend implementing a listener to [a webhook endpoint](/webhook.html).

:::

Need any technical assistance? [Contact us!](https://admin.wochit.com/contact-us) 


## Personalize the Experience

We allow you to set the default configuration to all users in our [admin panel](https://admin.wochit.com/my-video-creator), but sometimes you need to personalize the experience for specific users. You can add more features to premium users or set up different UI language for users based on the user's localization.
It can be done by setting different parameters of the openVideoCreator() function. 



### Add personal asset gallery
You may pass an array of objects containing lists with images / video URLs. The video creator will display these assets under the "My Gallery" tab, as the end-user will be able to choose an asset from the given list to be used in the video. 
```javascript
galleryAssets: [
  {
    title: 'My Project',
    assets: [
      {
        url: 'https://cdn1.sample.com/image1.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail.jpg'
        duration: 2.21, 
        type: 'video',
      },
    ],
  },
  {
    title: 'My Profile',
    assets: [
      {
        url: 'https://cdn1.sample.com/image2.jpg',
        type: 'image',
      },
      {
        url: 'https://cdn1.sample.com/video2.mp4',
        thumbnailUrl: 'https://cdn1.sample.com/videoThumbnail2.jpg'
        duration: 5.21, 
        type: 'video',
      },
    ],
  },
]
```

Set **galleryAssets** property in openVideoCreator() to be a list of objects. Each object is a folder having a *title* and an array of *assets*:  
**title** <code>string</code> <Badge text="Required" type="warning"/> 
This is the name of the folder.  
***
**assets** <code>object[]</code> <Badge text="Required" type="warning"/> 
An array of assets object. Each asset has the following properties: 

- **type** <code>string</code> <Badge text="Required" type="warning"/>  
The type of the asset. Can be *image* or *video*. 
***
- **url** <code>string</code> <Badge text="Required" type="warning"/>  
Direct link to the media asset. This should be a cross-origin link that is available for us to download.   
Supported formats: png, jpeg for images and mp4 and mov for video assets. 
***
- **thumbnailUrl** <code>string</code> <Badge text="Required*" type="warning"/> (*If the asset is a *video*)   
Direct link to the video thumbnail. This should be a cross-origin link that is available for us to download.  
Supported formats: png and jpeg.
***
- **duration** <code>float</code> <Badge text="Required*" type="warning"/> (*If the asset is a *video*)   
The video duration in seconds. 
***


### Linked fields

Wochit’s video creator can jump-start the templates with pre-injected data, personalized to each user.   
You can personalize the user experience by sending an array of personal data injected to the video. The template will open with the user information you send. It can be the user name, image, contact details and more.  



## Code Examples



